<!DOCTYPE html>

<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="utf-8"/>
<title>Championview</title>
<link rel="stylesheet" th:href="@{/css/bootstrap.min.css}"/>
<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" rel="stylesheet"/>
<script th:src="@{/js/bootstrap.bundle.min.js}"></script>
</head>
<body class="d-flex flex-column min-vh-100">
<header th:replace="layouts/header :: header"></header>
<nav th:replace="layouts/nav :: nav"></nav>
<main class="container my-4 flex-grow-1">
<span th:text="&gt;layouts/header">
<style>
#imid_bc7508c96f3cc48 .common-title::before {
    background: #074f68; /* 가상 요소에 배경색 지정 */

}

#imid_bc7508c96f3cc48 .common-title {
    background: #047e99; /* 요소에 배경색 지정 */
    color: #ffffff; /* 글자색 지정 */
}
</style>
<article>
<span th:text="&gt;layouts/nav">
<section class="commu-center">
<script src="../js/jquery-3.7.1.min.js" type="text/javascript"></script>
<script type="text/javascript">
		
			$(function() {
				// 24/02/21 수정 : 로그인 유무 확인 
				$(".rateBtn").click(function(){
					<span th:text="^member">
					alert("로그인부터 해주세요");
					return false;
					</div>member">
					
					// ajax로 값을 보냄
					<span th:text="#member">
					// alert("진입 확인");
					var champ_code = $("#hiddenData").data("champ");
					var member_id = $("#hiddenData").data("id");
					var rate = $(this).data("rate");
					// alert(member_id);
					// alert(champ_code);
					// alert(rate);
					$.ajax({
						type : "POST",
						url : "/checkRate",
						data : {
							"champ_code" : champ_code,
							"member_id" : member_id
						},
						success : function(data){
							if(data == true){
								alert("평점은 한번만 줄 수 있습니다.");
								return false;
							}else{
								location.href="/champ_board/championRateUpdate?champ_code="+champ_code+"&rate="+rate;
							}
						}
					});
					

					</div>member">
					
					
				});
				// 댓글 입력 기능 눌렀을때 member값이 없으면 로그인 해주세요 창 뛰움
				$("#write").click(function(){
					<span th:text="^member">
					alert("로그인부터 해주세요");
					return false;
					</div>member">
					
					<span th:text="#member">
					var frm1 = document.comWrite;
					if(!frm1.champ_comment.value){
						alert("내용을 입력해주세요");
						frm1.champ_comment.focus;
						return false;
					}
					frm1.submit();
					</div>member">
				});
				
				
				// 평점 버튼을 클릭했을 때 세션에 값이 없으면 로그인하라고 창뛰우기
				// html() : 태그의 값을 읽어오던지, 태그에 값을 집어 넣을 때 사용
				// 답글 기능 숨기기
				$("#comment_table .recomment").hide();
				$(".rc_btn").click(function() {
					// 아이디가 없을때 로그인 하라고 알림창 뜨기
					<span th:text="^member">
					alert("로그인부터 해주세요");
					return false;
					</div>member">
					$(".recomment").slideUp(10);
					$('.reText').val('');
					// 답글버튼(input의 부모 td tr next .recomment)
					// 답글 버튼을 눌렀을때 활성화
					$(this).parent().parent().next().children().slideDown(10);
					
				});
				
				
			});
		</script>
<section class="commu-common" id="imid_bc7508c96f3cc48">
<h2 class="common-title">
<span class="main">챔피언 정보</span> <span class="sub"></span>
</h2>
</section>
<!-- 로그인 성공시 있는 데이터 -->
<span th:text="#member"><input champion.champ_code"="" data-champ="&lt;span th:text=" id="hiddenData" type="hidden"/>" data-id="<span th:text="member.member_id">"&gt;member"&gt;
		<hr/>
<span th:text="#champion">
<div class="container">
<table class="table" style="width: 450px">
<tr>
<td style="width: 20px"><img alt="" champ_image"="" src="../champion_image/&lt;span th:text="/>" width="64px" height="64px"&gt;</td>
<td><span th:text="champ_name">,<span th:text="champ_nick_name"><br/>
<span th:text="rp"> <span th:text="be">
</span></span></span></span></td>
</tr>
<tr>
<td colspan="2" style="width: 200px"><span th:text="champ_content"></span></td>
</tr>
<tr>
<td colspan="2">포지션 : <span th:text="champ_position"></span></td>
</tr>
<tr>
<td colspan="2">평점 : <span th:text="champ_rate"> 점</span></td>
</tr>
</table>
<table>
<tr>
<td colspan="5">내가 생각하는 챔피언의 점수는?</td>
</tr>
<tr><!-- 24/02/21 수정 : 로그인 유무 확인 -->
<td><a class="rateBtn" data-rate="1" href="#">
							최악 1점   </a></td>
<td><a class="rateBtn" data-rate="2" href="#">
							별로 2점   </a></td>
<td><a class="rateBtn" data-rate="3" href="#">
							보통 3점   </a></td>
<td><a class="rateBtn" data-rate="4" href="#">
							우수 4점   </a></td>
<td><a class="rateBtn" data-rate="5" href="#">
							최고 5점 </a></td>
</tr>
</table>
</div>
champion"&gt;
		<hr/>
<!-- 댓글 테이블 -->
<div class="container">
<span th:text="#listExist">
<table border="1" id="comment_table" style="width: 700px">
<span th:text="#champCom">
<span th:text="^com_judge">
<tr>
<td><span th:text="nick_name"></span></td>
<td><span th:text="champ_comment"></span></td>
<td><span th:text="comment_logtime"><br/> <input champ_com_num"="" class="rc_btn" data-num="&lt;span th:text=" type="button" value="답글"/>"&gt; : <a href="#">신고</a>
</span></td>
</tr>
<tr>
<td class="recomment" colspan="3">
<form action="/champ_board/recomment" method="post" name="comRe">
<input champ_com_num"="" name="com_re_ref" type="hidden" value="&lt;span th:text="/>"&gt;
							<input com_re_lev"="" name="com_re_lev" type="hidden" value="&lt;span th:text="/>"&gt;
							<input com_re_seq"="" name="com_re_seq" type="hidden" value="&lt;span th:text="/>"&gt;
							<input champ_code"="" name="champ_code" type="hidden" value="&lt;span th:text="/>"&gt;
							<input name="pg" pg"="" type="hidden" value="&lt;span th:text="/>"&gt;
						<table style="width: 700px">
<tr>
<td><textarea class="reText" cols="80" name="champ_comment" rows="5"></textarea></td>
<td align="center"><input type="submit" value="등록"/></td>
</tr>
</table>
</form>
</td>
</tr>
</span></span></table></span></div>com_judge"&gt;
				
				<span th:text="#com_judge">
<tr>
<td><span th:text="nick_name"></span></td>
<td> └  <span th:text="champ_comment"></span></td>
<td><span th:text="comment_logtime"><br/> <span th:text="#islogin">
<a href="#">신고</a>
islogin"&gt;
					</span></span></td>
</tr>
com_judge"&gt;
		
				champCom"&gt;

				<tr>
<td align="center" colspan="3">
<span th:text="#previousPage"> [<a class="paging" href="championView?pg=&lt;span th:text=" previouspage"="">&amp;champ_code=<span th:text="champion.champ_code">"&gt;이전</span></a>]
					previousPage"&gt; 
						<span th:text="#pageList">
<span th:text="#current"> 
						[<a class="currentPaging" href="championView?pg=&lt;span th:text=" page"="">&amp;champ_code=<span th:text="champion.champ_code">"&gt;<span th:text="page"></span></span></a>]
						current"&gt; 
						
						<span th:text="^current"> 
						[<a class="paging" href="championView?pg=&lt;span th:text=" page"="">&amp;champ_code=<span th:text="champion.champ_code">"&gt;<span th:text="page"></span></span></a>]
						current"&gt; 
						pageList"&gt; 
						
						<span th:text="#nextPage"> [<a class="paging" href="championView?pg=&lt;span th:text=" nextpage"="">&amp;champ_code=<span th:text="champion.champ_code">"&gt;다음</span></a>]
						nextPage"&gt;

					</span></span></span></span></span></td>
</tr>

listExist"&gt;
			
			<span th:text="^listExist">
<h2 align="center">작성된 글이 없습니다 첫 작성자가 되어보세요!</h2>
listExist"&gt;
			
			<br/>
<h2>댓글입력</h2>
<form action="/champ_board/commentWrite" method="post" name="comWrite">
<input pg"="" type="hidden" value="&lt;span th:text="/>" name="pg"&gt; <input champion.champ_code"="" type="hidden" value="&lt;span th:text="/>" name="champ_code"&gt;
				<table border="1" style="width: 700px">
<tr>
<td><textarea cols="100" name="champ_comment" rows="5"></textarea></td>
<td><input id="write" type="button" value="등록"/></td>
</tr>
</table>
</form>

</span></span></span></span></span></section>
</span></article>
</span></main>
<footer th:replace="layouts/footer :: footer"></footer>
</body>
</html>
